# https://docs.travis-ci.com/user/languages/python/
language: python

# https://docs.travis-ci.com/user/customizing-the-build/#Building-Specific-Branches
branches:
  only:
    - master

# https://docs.travis-ci.com/user/encryption-keys/
env:
  global:
    - secure: "ORuGi+4zZ+X61rd7w/Ygm6DON5fcsySrNTQFkYvecU533RD0/wKrQNoLB++Z/FLGJp0utKW5y/M7rzZ9yPO19RSBgxv0CwNYCdhSfBGbDDLm2+bxff57jcdfDUJul7SrmvjsjJJHiedU44cqKvy+lHgZv+b5bx1u+Lt0y8Lp7QopGwafQ4nKuQ1d8g73Wlvz93EQ1mdgwYdOWgqA3fX2LmKpm4KxOPuiZMnzOTgevZ/Il0WFwHEi9o3CJARUrB4rv99/8MsyXJnTUHByfx/9jZjc96RUvLqOenIxoI08Tey5Z23tBgZ5Uq8+8W9txi8v2VPBXlwSbRm+Le9fEQ3hUoAZFTBfD8FNDNCtaMejn0pW7CoQJ5ImomJGXnB2HoIPjUal7qfegjuevPbcnTKa8fwDRw8zLvppZgNt39ujdRiR4X4c5tKDMnd6001JPxA2koDdMBIevDR9li33zf34yWxTKMRnzBc/ZR2TftqckQrcuFl40hfBpQ3TIXMfij4zHHFrzqoE8EpGPvugxKZTRLbvn3VOa9q2nXq+hG3KI3x2WPzDNmTLAVE8PWAmX7rTMfT6/u74ZgAvr3YIR+zxye2B6cFzLe826ej5QrCO6O4R+iSYN4v1AYMWcRHiB2pefDIWOq8fRNeC7M/9yNeNGkRzUDOOabmy3y/n2MjHmHc="

# https://docs.travis-ci.com/user/customizing-the-build/#The-Build-Lifecycle
install:
  - pip install git+https://github.com/adblockplus/python-abp
before_script:
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "TravisCI"
  - git config --global push.default "matching"

# https://docs.travis-ci.com/user/customizing-the-build/#Customizing-the-Build-Step
script:
  - git clone -b gh-pages "https://$GITHUB_TOKEN@github.com/easylist/easylistgermany" output
  - flrender -i easylistgermany=. easylistgermany.template output/easylistgermany.txt
  - cd output && git add --all . && git commit -m "Publishing revision $(git --git-dir ../.git rev-parse --short HEAD)" && git push --force origin gh-pages

