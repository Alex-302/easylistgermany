# https://docs.travis-ci.com/user/languages/python/
language: python

# https://docs.travis-ci.com/user/customizing-the-build/#Building-Specific-Branches
branches:
  only:
    - master

# https://docs.travis-ci.com/user/encryption-keys/
env:
  global:
    - secure: "gDHPwpmhUfhHzrOawm2DWZgnT+0N6n468JRqgu3NGYwnaigMAiVU5Hhsf1Pkus80XEavn42r/Eva2wfrvWLDTfGvvkSJ3uw/lD5RDJvdF2mX8g94IPTUhiAGIMlbMFptymGdkXKWZpQhVKccSJPeixgra2IgB67zZeRp/HATgxTANj9fOpoSzQrXQxucVwPd392ZqB7zAtpIq+9LkUabJQ3zh3NR7/GdZCE3PvuT4b/DNQVxo/oTqz4lehzz+RmC0nTSh4S1OR9soUv+0olJ30dO60y+YNmSnW+DbPRMDUD0wIGefcoQvh/ltVuQYLPmJy/6Xsfe8focbZAImicWf5BDE/lu9xyz4/W5dtytnCkbHhqFeuS7zNoWOrLg1jNqlBJixjuvYUPyizKFXYWgd6CuFGjDFrgtvqA+538QYUdD82CPPDvmyVIMKy8IwEPRptz8SkA/CxJhDh7r7+a2q6lFhH4ZDeXaXs2qtRJGqHLc05DP6dhNC339htnKCZIbhLfh0wy3cDxijDvMJyD2woso7FdbVGt71KS5hXa97Vi8kmoNFQYx2ILT9qsu9ziCNgFRo0WTQ3Ql+98rc65XdSQC+RmfcQcIrT150I0+KW3zR4PZ13yG1pIa7B3qmGzUNxHlRUDksI1TYUOmbV21LBa464O9qj9nPhnP1Xq2x5k="

# https://docs.travis-ci.com/user/customizing-the-build/#The-Build-Lifecycle
install:
  - pip install git+https://github.com/adblockplus/python-abp
before_script:
  - git config --global user.email "travis@travis-ci.org"
  - git config --global user.name "TravisCI"
  - git config --global push.default "matching"

# https://docs.travis-ci.com/user/customizing-the-build/#Customizing-the-Build-Step
script:
  - git clone -b gh-pages "https://$GITHUB_TOKEN@github.com/easylist/easylistgermany" output
  - flrender -i easylistgermany=. easylistgermany.template output/easylistgermany.txt
  - cd output && git add --all . && git commit -m "Publishing revision $(git --git-dir ../.git rev-parse --short HEAD)" && git push --force origin gh-pages

